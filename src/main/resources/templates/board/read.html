<!DOCTYPE html>

<!-- 2. basic 페이지에 조각을 전달 -->
<th:block th:replace="~{/layout/basic :: setContent(~{this::content} )}">
<!-- 1. content 라는 이름으로 조각 정의하기 -->
<th:block th:fragment="content">

<h1 class="mt-4">Board Read Page</h1>


<div class="form-group">
  <label >번호</label>
  <input type="text" class="form-control" th:value="${dto.no}" readonly >
</div>

<div class="form-group">
  <label >제목</label>
  <input type="text" class="form-control" th:value="${dto.title}" readonly >
</div>
<div class="form-group">
  <label >내용</label>
  <textarea class="form-control" rows="5" readonly>[[${dto.content}]]</textarea>
</div>
<div class="form-group">
  <label >작성자</label>
  <input type="text" class="form-control" th:value="${dto.writer}" readonly>
</div>
<div class="form-group">
  <label >등록일</label>
  <input type="text" class="form-control" th:value="${#temporals.format(dto.regDate,'yyyy/MM/dd HH:mm:ss')}" readonly>
</div>
<div class="form-group">
  <label >수정일</label>
  <input type="text" class="form-control" th:value="${#temporals.format(dto.modDate,'yyyy/MM/dd HH:mm:ss')}" readonly>
</div>

<!-- 댓글 -->
<div class="card shadow mb-4" style="margin-top:10px">

	<div class="card-header py-3">
	<h6 class="m-0 font-weight-bold text-primary">댓글보기</h6>
	</div>
	<div class="card-body" id="commentdiv">
	</div>
	
	<div class="card-body">
	<textarea class="form-control" id="commentContent" rows="3">
	</textarea>
	<button type="button" class="btn btn-secondary" onclick="">댓글등록</button>
	</div>
	
</div>
<!-- 댓글 끝 -->

<!-- @{} 링크표현식 -->
<!-- 예: /board/modify?no=1 -->
<a th:href="@{/board/modify(no = ${dto.no})}">
  <button type="button" class="btn btn-primary">수정</button>
</a>

<!-- 페이지 번호 파라미터 추가 -->
<!-- /board/list?page=3 -->
<a th:href="@{/board/list(page=${page})}">
  <button type="button" class="btn btn-info">목록으로</button>
</a>

<!-- 인라인 속성 추가(타임리프의 변수표현식 처리) -->
<script th:inline="javascript">

	// 페이지 로드시 showComment 함수를 호출하여 댓글 목록 출력
	document.addEventListener("DOMcontentLoaded", ()=>{
		showComment();
	});

	// 댓글 목록을 출력하는 메소드
	function showComment() {
		
		// 해당 페이지의 게시물 데이터
		let board = [[${dto}]];
		
		// 댓글 div 요소 가져오기
		let comment_div = document.getElementById("commentdiv");
		
		// 서버에 게시물 목록 요청하기
		$.ajax({
			type: "GET",  //API 메소드
			url: "/comment/list?boardNo=" + board.no,   //API 주소
			success: function(list) { //응답을 받은 후 처리
				console.log(list);
			}
		});
		
	}

</script>

</th:block>
</th:block>
